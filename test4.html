<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
	<head>
		<title>Citibank Online | Memeber Get Member | Citibank SGGCB</title>
		<script src="https://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
	</head>
	
	<body>
		<p><div id="URL"></div></p>
		<p><div id="title"></div></p>
		<p><div id="description"></div></p>
		<p><div id="image"></div></p>
		<p><div id="rceurl"></div></p>
	</body>
</html>

<script language="JavaScript">
$(document).ready(function($) {
	var currentUrl = document.URL;
	$('#URL').html(currentUrl);
	
	var urlObject = getAllUrlParams(currentUrl);
	$('#title').html(urlObject.title);
	$('#description').html(urlObject.description);
	$('#image').html(urlObject.image);
	$('#rceurl').html(urlObject.rceurl);
	
	/*var sharingTitle = 'Get S$120 cash rewards from Citi';
	var sharingUrl = 'https://globalcommon.uat.citibank.com.sg/english/mgm/social_media_sharing.html';
	var sharingDescription = 'Sign up and enjoy the benefits of Citi Credit Cards.';
	var sharingImage = 'https://globalcommon.uat.citibank.com.sg/english/mgm/mainBanner.jpg';
	
	$('head').append('<link rel="canonical" href="' + sharingUrl + '">');
	$('head').append('<meta property="og:title" content="' + sharingTitle + '">');
	$('head').append('<meta property="og:url" content="' + sharingUrl + '">');
	$('head').append('<meta property="og:description" content="' + sharingDescription + '">');
	$('head').append('<meta property="og:image" content="' + sharingImage + '">');*/
	
	var sharingTitle = urlObject.title;
	var sharingUrl = 'https://globalcommon.uat.citibank.com.sg/english/mgm/social_media_sharing.html';
	var sharingDescription = urlObject.description;
	var sharingImage = urlObject.image;
	var redirectUrl = urlObject.rceurl;
	
	$('head').append('<link rel="canonical" href="' + redirectUrl + '">');
	$('head').append('<meta property="og:title" content="' + sharingTitle + '">');
	$('head').append('<meta property="og:url" content="' + sharingUrl + '">');
	$('head').append('<meta property="og:description" content="' + sharingDescription + '">');
	$('head').append('<meta property="og:image" content="' + sharingImage + '">');
	
	
	function getAllUrlParams(url) {
		// get query string from url (optional) or window
		var queryString = url ? url.split('?')[1] : window.location.search.slice(1);

		// we'll store the parameters here
		var obj = {};

		// if query string exists
		if (queryString) {

			// stuff after # is not part of query string, so get rid of it
			queryString = queryString.split('#')[0];

			// split our query string into its component parts
			var arr = queryString.split('&');

			for (var i = 0; i < arr.length; i++) {
				// separate the keys and the values
				var a = arr[i].split('=');

				// in case params look like: list[]=thing1&list[]=thing2
				var paramNum = undefined;
				var paramName = a[0].replace(/\[\d*\]/, function(v) {
					paramNum = v.slice(1, -1);
					return '';
				});

				// set parameter value (use 'true' if empty)
				var paramValue = typeof (a[1]) === 'undefined' ? true : a[1];

				// (optional) keep case consistent
				paramName = paramName.toLowerCase();
				//paramValue = paramValue.toLowerCase();
				paramValue = decodeURIComponent(paramValue);
				console.log(paramValue);

				// if parameter name already exists
				if (obj[paramName]) {
					// convert value to array (if still string)
					if (typeof obj[paramName] === 'string') {
						obj[paramName] = [ obj[paramName] ];
					}
					// if no array index number specified...
					if (typeof paramNum === 'undefined') {
						// put the value on the end of the array
						obj[paramName].push(paramValue);
					}
					// if array index number specified...
					else {
						// put the value at that index number
						obj[paramName][paramNum] = paramValue;
					}
				}
				// if param name doesn't exist yet, set it
				else {
					obj[paramName] = paramValue;
				}
			}
		}

		return obj;
	}
});
</script>
